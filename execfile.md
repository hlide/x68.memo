# 実行ファイル

## ファイルサイズの削減

### lzxで圧縮する
ITA lzxで実行ファイルを実行可能なまま圧縮することができる。
デバイスドライバを圧縮した場合もそのまま組み込むことが出来る。

なおITA lzxのもととなったF&amp;I lzxでは、X68030に未対応、デバイスドライバは別途LZXLOADERが必要、
といった制限があったがITA lzxでは解消されている。

### デバッグ情報を削除する
X形式実行ファイルでデバッグ情報(シンボル情報、ソースコードデバッグ情報)が付属している場合は、これを削除(strip)する。

ただしlzxで圧縮すればそれらの情報は削除されるので、圧縮できる場合は圧縮すればよい。

### R形式実行ファイルへの変更
レアケースだが、小さいX形式実行ファイルでlzxで圧縮できない場合にR形式実行ファイルに変更することで、
X形式実行ファイルのヘッダを含まない分だけ小さくできることがある。
* リロケート情報を含まない。
* 実行開始アドレスがファイル先頭。
* ブロックストレージセクション(`.bss`、`.stack`)を含まないか、非常に小さい。

ただし、XCに含まれているCV.Xは[不具合がある](https://stdkmd.net/bugsx68k/#cv_xtor)ので使用しないこと。

### その他
ソースコード変更、ライブラリ変更、コンパイラの最適化オプションなどの方法もある。

実行ファイルに限らない話だが、Human68kではファイルサイズがクラスタサイズ(例えば2HDフロッピーディスクであれば1024バイト)
の倍数だと1クラスタ余計に使用してしまう。
REFRESHGで`/E`オプションを指定すると無駄なクラスタを解放することができる。


----
[goto index](README.md)
